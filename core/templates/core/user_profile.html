{% extends 'base.html' %}

{% block content %}


<div class="profile">
        <h2>Username: {{user}}</h2>
        <p>Name: {{user.person.first_name}}</p>
        <p>Role: {{user.person.role}}</p> 
        {% for pair in user.person.pairs %}
        {% if user.person.role == 'mentor' %}
        <p>You are paired with: {{pair.mentee}}</p>
        {% else %}
        <p> You are paired with: {{pair.mentor}}</p>
        {% endif %}
        {% endfor %}
</div> 


{% for goal in goals_by_user %}

<div class="goal-div">

        <a class="" href="#">{{goal.description}}</a>
        {% for step in goal.steps.all %}
        <div class="individual-steps" data-step={{step}}>
        
        </div>
        {% endfor %}
       
              

</div>
{% endfor %}


<h4 class="title">Add a goal</h4>
<form id='new_goal' class='new_goal' method='post' action="{% url 'add_goal' %}">{% csrf_token %}
        <textarea required type='text' class="newGoal" placeholder='Add Goal'></textarea>
        <button type="submit"> Submit </button>
</form>





<dl class="js-badger-accordion">
                <dt>
                    <button class="js-badger-accordion-header">
                        Header Content
                    </button>
                </dt>
                <dd class="badger-accordion__panel js-badger-accordion-panel">
                    <div class="js-badger-accordion-panel-inner">
                        Panel Content
                    </div>
                </dd>
            </dl>









<div class='goals'>
        {% for goal in goals_by_user %}
        <ul>{{ goal.description }}</ul>
                {% for step in goal.steps.all %}  
                        <li>{{ step }} 
                                {% if step.done %}
                                <input type="checkbox" checked=checked class='step-done-checkbox' data-step='{{step.pk}}'/>
                                {% else %}
                                <input type="checkbox" class='step-done-checkbox' data-step='{{step.pk}}'/>
                                {% endif %}
                        </li>
                {% endfor %}

<form class='new_step' method='post' data-goal='{{goal.pk}}' action="{% url 'add_step' goal.pk %}">{% csrf_token %}
        <textarea required type='text' class="newStep" placeholder='Add Step'></textarea>
        <button type="submit"> Submit </button>
</form>
{% endfor %}

</div>

<h4 class="title">Add a goal</h4>
<form id='new_goal' class='new_goal' method='post' action="{% url 'add_goal' %}">{% csrf_token %}
        <textarea required type='text' class="newGoal" placeholder='Add Goal'></textarea>
        <button type="submit"> Submit </button>
</form>

<div class="chat-board">
     <h3><center>User Chat Access:</center></h3>
     <div class="buttons index-buttons"><a  href="{% url 'twilio' %}" title="Chat">General Chatroom</a></div>
     <div class="buttons index-buttons"><a  href="{% url 'chatrooms' %}" title="Chatrooms">Mentor/Mentee Paired Chatrooms</a></div>
</div>
<div class="forum"></div>


{% if request.user.is_superuser or request.user.is_admin %}
<div class="admin-functionality">
        <h3><center>Admin Functionality:</center></h3>
        <div class="buttons index-buttons"><a  href="{% url 'create_pair' %}" title="Create Pair">Create Pair</a></div>
        <div class="buttons index-buttons"><a  href="{% url 'create_chat' %}" title="Create Pair">Create Chat</a></div>
</div>

<br>

{% endif %}
{% endblock %}