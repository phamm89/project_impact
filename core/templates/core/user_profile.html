{% extends 'base.html' %}

{% block content %}

<div class='grid-container profile-wrapper'>
        <div class="profile">
                        <h4>Welcome {{user.person.first_name}}</h4>
                        <p>Email: <a href="">{{user.person.email_address}}</a></p> 
                        {% for pair in user.person.pairs %}
                           {% if user.person.role == 'mentor' %}
                        <p>Click to view your mentee: <a href="{% url 'profile' user_id=pair.mentee.id %}" title="Profile" target="_blank">{{pair.mentee}}'s Profile</a></p>
                         {% else %}
                        <p>Click to view your mentor: <a  href="{% url 'profile' user_id=pair.mentor.id %}" title="Profile" target="_blank"><button id="pairProfile-button">{{pair.mentor}}'s Profile</button></center></a></p>
                        {% endif %}
                        {% endfor %}
                
                       <p>{{user.person.first_name}}'s Interests:
                        {% for category in user.person.categories.all %}
                        {{ category }}
                        {% if not forloop.last %},{% endif %}
                        {% endfor %}</p>
                
        </div>

        <div class="goals-list"></div>
               <h3> {{user.person.first_name | title}}'s goals:</h3>
        {% for goal in goals_by_user %}

                <details>
                        <summary>{{goal.description}}</summary>
                        
                                        {% for step in goal.steps.all %}  
                                        <p>
                                                {% if step.done %}
                                                <input type="checkbox" checked=checked class='step-done-checkbox' data-step='{{step.pk}}'/>
                                                {% else %}
                                                <input type="checkbox" class='step-done-checkbox' data-step='{{step.pk}}'/>
                                                {% endif %}
                                                {{ step }} 
                                        </p>
                                {% endfor %}
                
                                 <form class='new_step' method='post' data-goal='{{goal.pk}}' action="{% url 'add_step' goal.pk %}">{% csrf_token %}
                                        <input required type='text' class="newStep" placeholder='Add Step'></input>
                                        <button type="step-submit-button"> Submit </button>
                                 </form>
                </details>
                 
                {% endfor %} 
                </ul>
                
                <div class='add-goal'>
                        <form id='new_goal' class='new_goal' method='post' action="{% url 'add_goal' %}">{% csrf_token %}
                                <input required type='text' class="newGoal" placeholder='Add a new goal'></input>
                                <button class='goal-submit-button' type="submit"> Submit </button>
                        </form>
              </div>

</div>
{% endfor %}



<div class="chat-board">

     <section class="section">
        <div class="container">
          <div class="columns">
            {% for chatroom in chatrooms %}
            {% for pair in user.person.pairs %}
            {% if pair == chatroom.pair %}
            <div class="column">
                        <h3><center>Chatroom Access:</center></h3>
                        <div class="buttons index-buttons"><a href="/chatrooms/{{chatroom.slug}}">Mentor/Mentee Chatroom</a></div>
                      {% endif %}
                    {% endfor %}
                  </div>
                </div>
            </div>
            {% endfor %}
          </div>
        </div>
      </section>
</div>
<div class="forum"></div>


{% if request.user.is_superuser or request.user.is_admin %}
<div class="admin-functionality">
        <h3><center>Admin Functionality:</center></h3>
        <div class="buttons index-buttons"><a  href="{% url 'create_pair' %}" title="Match Mentors:Mentees">Match Mentors/Mentees</a></div>
</div>

<br>

</div>
{% endif %}



</div>

{% endblock %}

